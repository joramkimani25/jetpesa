(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92161,e=>{"use strict";let t=(0,e.i(75254).default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);e.s(["Menu",()=>t],92161)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},99023,4997,27516,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>s],99023);let a=(0,t.default)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);e.s(["LogIn",()=>a],4997);let r=(0,t.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);e.s(["History",()=>r],27516)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},21030,51066,2957,10708,40786,95468,81943,48302,e=>{"use strict";var t=e.i(43476),s=e.i(932),a=e.i(67881),r=e.i(52754),l=e.i(7233),n=e.i(99023),i=e.i(4997),o=e.i(27516),c=e.i(25652),d=e.i(27895),x=e.i(71645),m=e.i(15940),h=e.i(15057),u=e.i(92163),g=e.i(30699),p=e.i(16715),f=e.i(47163);function b(e){let a,r,l,n,i,o,c,b,j,w,v,N,k,S,_=(0,s.c)(33),{userId:C}=e;_[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],_[0]=a):a=_[0];let[z,T]=(0,x.useState)(a),[P,I]=(0,x.useState)(!0),[L,M]=(0,x.useState)(0),[E,B]=(0,x.useState)(!0);_[1]!==C?(r=async(e,t)=>{let s=(0,m.createSupabaseBrowserClient)(),a=10*e,{data:r,error:l}=await s.from("transactions").select("*, wallets!inner(user_id)").eq("wallets.user_id",C).order("created_at",{ascending:!1}).range(a,a+10-1);if(l)return void console.error("Error fetching transactions:",l);if(r){let e=r.map(y);void 0!==t&&t?T(e):T(t=>[...t,...e]),r.length<10&&B(!1)}I(!1)},_[1]=C,_[2]=r):r=_[2];let A=r;_[3]!==A?(l=()=>{A(0,!0)},_[3]=A,_[4]=l):l=_[4],_[5]!==C?(n=[C],_[5]=C,_[6]=n):n=_[6],(0,x.useEffect)(l,n),_[7]!==A||_[8]!==L?(i=()=>{let e=L+1;M(e),A(e)},_[7]=A,_[8]=L,_[9]=i):i=_[9];let U=i;_[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("h3",{className:"text-sm font-bold text-gray-300",children:"Transaction History"}),_[10]=o):o=_[10],_[11]!==A?(c=()=>{M(0),B(!0),I(!0),A(0,!0)},_[11]=A,_[12]=c):c=_[12];let D=P?"animate-spin":"";return _[13]!==D?(b=(0,f.cn)("text-gray-400",D),_[13]=D,_[14]=b):b=_[14],_[15]!==b?(j=(0,t.jsx)(p.RefreshCw,{size:14,className:b}),_[15]=b,_[16]=j):j=_[16],_[17]!==j||_[18]!==c?(w=(0,t.jsxs)("div",{className:"p-4 border-b border-white/[0.06] flex items-center justify-between",children:[o,(0,t.jsx)("button",{onClick:c,className:"p-1.5 hover:bg-white/[0.06] rounded-lg transition-colors",children:j})]}),_[17]=j,_[18]=c,_[19]=w):w=_[19],_[20]!==P||_[21]!==z?(v=0!==z.length||P?(0,t.jsx)("div",{className:"divide-y divide-white/[0.04]",children:z.map(e=>(0,t.jsxs)("div",{className:"p-3 flex items-center justify-between hover:bg-white/[0.02] transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,f.cn)("w-8 h-8 rounded-lg flex items-center justify-center bg-white/[0.03]"),children:function(e){switch(e){case"deposit":return(0,t.jsx)(d.ArrowDownLeft,{size:16,className:"text-green-500"});case"withdrawal":return(0,t.jsx)(h.ArrowUpRight,{size:16,className:"text-red-500"});case"bet":return(0,t.jsx)(u.Gamepad2,{size:16,className:"text-orange-500"});case"win":return(0,t.jsx)(u.Gamepad2,{size:16,className:"text-green-500"});case"referral_bonus":return(0,t.jsx)(g.Gift,{size:16,className:"text-purple-500"});default:return(0,t.jsx)(p.RefreshCw,{size:16,className:"text-gray-500"})}}(e.type)}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-bold text-gray-300 capitalize",children:e.type.replace("_"," ")}),(0,t.jsx)("span",{className:"text-[10px] text-gray-500",children:new Date(e.created_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsxs)("span",{className:(0,f.cn)("text-xs font-black",function(e){return["deposit","win","referral_bonus"].includes(e)?"text-green-400":"text-white"}(e.type)),children:[["deposit","win","referral_bonus"].includes(e.type)?"+":"-",e.amount.toLocaleString()]}),(0,t.jsx)("span",{className:(0,f.cn)("text-[10px] capitalize","completed"===e.status?"text-green-500/50":"pending"===e.status?"text-orange-500/50":"text-red-500/50"),children:e.status})]})]},e.id))}):(0,t.jsx)("div",{className:"p-8 text-center text-gray-500 text-xs",children:"No transactions found"}),_[20]=P,_[21]=z,_[22]=v):v=_[22],_[23]!==E||_[24]!==U||_[25]!==P?(N=E&&!P&&(0,t.jsx)("button",{onClick:U,className:"w-full p-3 text-xs text-gray-400 font-bold hover:bg-white/[0.04] transition-colors",children:"Load More"}),_[23]=E,_[24]=U,_[25]=P,_[26]=N):N=_[26],_[27]!==v||_[28]!==N?(k=(0,t.jsxs)("div",{className:"max-h-[300px] overflow-y-auto",children:[v,N]}),_[27]=v,_[28]=N,_[29]=k):k=_[29],_[30]!==w||_[31]!==k?(S=(0,t.jsxs)("div",{className:"glass-card-dark rounded-xl overflow-hidden",children:[w,k]}),_[30]=w,_[31]=k,_[32]=S):S=_[32],S}function y(e){let{wallets:t,...s}=e;return s}var j=e.i(1742);function w(e){let x,m,h,u,g,p,f,y,w,v,N,k,S,_,C=(0,s.c)(33),{isLoggedIn:z,balance:T,userId:P,onDeposit:I,onWithdraw:L,onLogin:M}=e,{settings:E}=(0,j.useDomain)(),B=!!E?.paymentSettings?.c2b,A=!!E?.paymentSettings?.b2c;if(!z){let e,s,l,n,o;return C[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-orange-500/20 to-red-500/20 flex items-center justify-center mb-6 border border-white/[0.08]",children:(0,t.jsx)(r.Wallet,{size:36,className:"text-orange-400"})}),s=(0,t.jsx)("h2",{className:"text-xl font-black text-white mb-2",children:"Access Your Wallet"}),l=(0,t.jsx)("p",{className:"text-gray-400 text-sm mb-6 max-w-[280px]",children:"Login to view your balance, make deposits, and withdraw your winnings instantly."}),C[0]=e,C[1]=s,C[2]=l):(e=C[0],s=C[1],l=C[2]),C[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(i.LogIn,{size:18}),C[3]=n):n=C[3],C[4]!==M?(o=(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e,s,l,(0,t.jsxs)(a.Button,{onClick:M,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-400 hover:to-red-400 text-white font-bold h-12 px-8 text-sm rounded-xl shadow-lg shadow-orange-500/20 border-0 gap-2",children:[n,"Login to Continue"]})]}),C[4]=M,C[5]=o):o=C[5],o}return C[6]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/10 via-transparent to-red-500/10 pointer-events-none"}),C[6]=x):x=C[6],C[7]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)("div",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Total Balance"}),C[7]=m):m=C[7],C[8]!==T?(h=T.toLocaleString(void 0,{minimumFractionDigits:2}),C[8]=T,C[9]=h):h=C[9],C[10]!==h?(u=(0,t.jsxs)("div",{className:"text-3xl font-black text-white mb-1",children:["KES ",(0,t.jsx)("span",{className:"bg-gradient-to-r from-orange-400 to-red-400 bg-clip-text text-transparent",children:h})]}),C[10]=h,C[11]=u):u=C[11],C[12]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-400 text-xs font-bold",children:[(0,t.jsx)(c.TrendingUp,{size:12}),(0,t.jsx)("span",{children:"Available for withdrawal"})]}),C[12]=g):g=C[12],C[13]!==u?(p=(0,t.jsxs)("div",{className:"glass-card-dark p-5 mb-4 relative overflow-hidden",children:[x,(0,t.jsxs)("div",{className:"relative z-10",children:[m,u,g]})]}),C[13]=u,C[14]=p):p=C[14],C[15]!==B||C[16]!==I?(f=B?(0,t.jsxs)(a.Button,{onClick:I,className:"bg-gradient-to-b from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 text-white font-bold h-14 text-sm rounded-xl shadow-lg shadow-green-500/20 border-0 flex flex-col items-center justify-center gap-1",children:[(0,t.jsx)(l.Plus,{size:20}),(0,t.jsx)("span",{className:"text-xs",children:"Deposit"})]}):(0,t.jsx)("div",{className:"opacity-50 cursor-not-allowed bg-white/5 h-14 rounded-xl flex items-center justify-center border border-white/5",children:(0,t.jsx)("span",{className:"text-gray-500 text-xs",children:"Deposits Unavailable"})}),C[15]=B,C[16]=I,C[17]=f):f=C[17],C[18]!==A||C[19]!==L?(y=A?(0,t.jsxs)(a.Button,{onClick:L,className:"bg-gradient-to-b from-orange-500 to-orange-600 hover:from-orange-400 hover:to-orange-500 text-white font-bold h-14 text-sm rounded-xl shadow-lg shadow-orange-500/20 border-0 flex flex-col items-center justify-center gap-1",children:[(0,t.jsx)(n.Minus,{size:20}),(0,t.jsx)("span",{className:"text-xs",children:"Withdraw"})]}):(0,t.jsx)("div",{className:"opacity-50 cursor-not-allowed bg-white/5 h-14 rounded-xl flex items-center justify-center border border-white/5",children:(0,t.jsx)("span",{className:"text-gray-500 text-xs",children:"Withdrawals Unavailable"})}),C[18]=A,C[19]=L,C[20]=y):y=C[20],C[21]!==f||C[22]!==y?(w=(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[f,y]}),C[21]=f,C[22]=y,C[23]=w):w=C[23],C[24]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(o.History,{size:14,className:"text-gray-400"}),(0,t.jsx)("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Quick Stats"})]}),C[24]=v):v=C[24],C[25]===Symbol.for("react.memo_cache_sentinel")?(N=(0,t.jsxs)("div",{className:"glass-card-dark p-4 mb-4",children:[v,(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center",children:(0,t.jsx)(d.ArrowDownLeft,{size:14,className:"text-green-400"})}),(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Total Deposited"})]}),(0,t.jsx)("span",{className:"text-white font-bold text-sm",children:"KES 0.00"})]})})]}),C[25]=N):N=C[25],C[26]!==P?(k=P&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(b,{userId:P})}),C[26]=P,C[27]=k):k=C[27],C[28]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)("div",{className:"glass-card-dark p-4 border-l-2 border-orange-500",children:(0,t.jsxs)("p",{className:"text-gray-400 text-xs leading-relaxed",children:[(0,t.jsx)("span",{className:"text-orange-400 font-bold",children:"ðŸ’¡ Tip:"})," Deposits are instant via M-Pesa. Withdrawals are processed within 5 minutes."]})}),C[28]=S):S=C[28],C[29]!==k||C[30]!==p||C[31]!==w?(_=(0,t.jsxs)("div",{className:"flex flex-col h-full p-4 overflow-y-auto pb-20",children:[p,w,N,k,S]}),C[29]=k,C[30]=p,C[31]=w,C[32]=_):_=C[32],_}e.s(["default",()=>w],21030),e.i(47167);var v=e.i(84614),N=e.i(75254);let k=(0,N.default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),S=(0,N.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),_=(0,N.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var C=e.i(92270);let z=(0,N.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var T=e.i(62031);let P=(0,N.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),I=(0,N.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function L(e){let a,r,l,n,i,o,c,d,x,m,h=(0,s.c)(26),{icon:u,label:g,description:p,onClick:b,danger:y,badge:j}=e,w=y&&"hover:bg-red-500/10";h[0]!==w?(a=(0,f.cn)("w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 hover:bg-white/[0.05] active:scale-[0.98]",w),h[0]=w,h[1]=a):a=h[1];let v=y?"bg-red-500/10":"bg-white/[0.05]";h[2]!==v?(r=(0,f.cn)("w-10 h-10 rounded-xl flex items-center justify-center",v),h[2]=v,h[3]=r):r=h[3],h[4]!==u||h[5]!==r?(l=(0,t.jsx)("div",{className:r,children:u}),h[4]=u,h[5]=r,h[6]=l):l=h[6];let N=y?"text-red-400":"text-white";return h[7]!==N?(n=(0,f.cn)("font-bold text-sm",N),h[7]=N,h[8]=n):n=h[8],h[9]!==g||h[10]!==n?(i=(0,t.jsx)("div",{className:n,children:g}),h[9]=g,h[10]=n,h[11]=i):i=h[11],h[12]!==p?(o=p&&(0,t.jsx)("div",{className:"text-xs text-gray-500",children:p}),h[12]=p,h[13]=o):o=h[13],h[14]!==i||h[15]!==o?(c=(0,t.jsxs)("div",{className:"flex-1 text-left",children:[i,o]}),h[14]=i,h[15]=o,h[16]=c):c=h[16],h[17]!==j?(d=j&&(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-orange-500/20 text-orange-400 text-[10px] font-bold",children:j}),h[17]=j,h[18]=d):d=h[18],h[19]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)(z,{size:16,className:"text-gray-600"}),h[19]=x):x=h[19],h[20]!==b||h[21]!==c||h[22]!==d||h[23]!==a||h[24]!==l?(m=(0,t.jsxs)("button",{onClick:b,className:a,children:[l,c,d,x]}),h[20]=b,h[21]=c,h[22]=d,h[23]=a,h[24]=l,h[25]=m):m=h[25],m}function M(e){let r,l,n,o,c,d,x,m,h,u,p,f,b,y,j,w=(0,s.c)(27),{isLoggedIn:N,user:M,onLogin:E,onLogout:B,onProfileOpen:A}=e;return w[0]!==N||w[1]!==E||w[2]!==A||w[3]!==M?(r=(0,t.jsx)("div",{className:"p-4 border-b border-white/[0.06]",children:N&&M?(0,t.jsxs)("button",{onClick:A,className:"w-full flex items-center gap-3 p-3 glass-card-dark rounded-xl hover:bg-white/[0.05] transition-all",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center",children:(0,t.jsx)(v.User,{size:24,className:"text-white"})}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("div",{className:"font-black text-white",children:M.username||"User"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:M.phone||"View Profile"})]}),(0,t.jsx)(z,{size:18,className:"text-gray-500"})]}):(0,t.jsxs)("div",{className:"glass-card-dark p-4 rounded-xl text-center",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-full bg-white/[0.05] flex items-center justify-center mx-auto mb-3 border border-white/[0.08]",children:(0,t.jsx)(v.User,{size:24,className:"text-gray-400"})}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mb-3",children:"Login to access all features"}),(0,t.jsxs)(a.Button,{onClick:E,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-400 hover:to-red-400 text-white font-bold h-10 w-full text-sm rounded-xl border-0 gap-2",children:[(0,t.jsx)(i.LogIn,{size:16}),"Login"]})]})}),w[0]=N,w[1]=E,w[2]=A,w[3]=M,w[4]=r):r=w[4],w[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("div",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-2 px-3",children:"Account"}),w[5]=l):l=w[5],w[6]!==N||w[7]!==A?(n=N&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L,{icon:(0,t.jsx)(v.User,{size:18,className:"text-gray-400"}),label:"My Profile",description:"View and edit your profile",onClick:A}),(0,t.jsx)(L,{icon:(0,t.jsx)(P,{size:18,className:"text-gray-400"}),label:"Notifications",description:"Manage your alerts"})]}),w[6]=N,w[7]=A,w[8]=n):n=w[8],w[9]!==n?(o=(0,t.jsxs)("div",{className:"p-4 space-y-1",children:[l,n]}),w[9]=n,w[10]=o):o=w[10],w[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("div",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-2 px-3",children:"Rewards"}),w[11]=c):c=w[11],w[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(L,{icon:(0,t.jsx)(T.Share2,{size:18,className:"text-orange-400"}),label:"Refer Friends",description:"Earn bonus on referrals",badge:"Earn 10%"}),w[12]=d):d=w[12],w[13]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsxs)("div",{className:"p-4 space-y-1",children:[c,d,(0,t.jsx)(L,{icon:(0,t.jsx)(g.Gift,{size:18,className:"text-green-400"}),label:"Promotions",description:"View active offers",badge:"NEW"})]}),w[13]=x):x=w[13],w[14]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)("div",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-2 px-3",children:"Support"}),w[14]=m):m=w[14],w[15]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(L,{icon:(0,t.jsx)(k,{size:18,className:"text-blue-400"}),label:"Help Center",description:"FAQs and guides"}),w[15]=h):h=w[15],w[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(L,{icon:(0,t.jsx)(S,{size:18,className:"text-purple-400"}),label:"Contact Us",description:"Get in touch"}),w[16]=u):u=w[16],w[17]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)(L,{icon:(0,t.jsx)(I,{size:18,className:"text-gray-400"}),label:"Terms & Conditions",description:"Legal information"}),w[17]=p):p=w[17],w[18]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsxs)("div",{className:"p-4 space-y-1",children:[m,h,u,p,(0,t.jsx)(L,{icon:(0,t.jsx)(_,{size:18,className:"text-gray-400"}),label:"Responsible Gaming",description:"Play responsibly"})]}),w[18]=f):f=w[18],w[19]!==N||w[20]!==B?(b=N&&(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(L,{icon:(0,t.jsx)(C.LogOut,{size:18,className:"text-red-400"}),label:"Logout",description:"Sign out of your account",onClick:B,danger:!0})}),w[19]=N,w[20]=B,w[21]=b):b=w[21],w[22]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)("div",{className:"p-4 mt-auto text-center",children:(0,t.jsxs)("span",{className:"text-[10px] text-gray-600",children:["JETPESA"," v1.0.0"]})}),w[22]=y):y=w[22],w[23]!==r||w[24]!==b||w[25]!==o?(j=(0,t.jsxs)("div",{className:"flex flex-col h-full overflow-y-auto pb-20",children:[r,o,x,f,b,y]}),w[23]=r,w[24]=b,w[25]=o,w[26]=j):j=w[26],j}e.s(["default",()=>M],51066);var E=e.i(37727);function B(e){let a,r,l,n,i,o,c,d,m,h,u,g,p=(0,s.c)(28),{isOpen:b,onClose:y,children:j,title:w,className:v}=e,[N,k]=x.useState(!1);if(p[0]!==b?(a=()=>{if(b)k(!0),document.body.style.overflow="hidden";else{let e=setTimeout(()=>k(!1),300);return document.body.style.overflow="unset",()=>clearTimeout(e)}},r=[b],p[0]=b,p[1]=a,p[2]=r):(a=p[1],r=p[2]),x.useEffect(a,r),!N&&!b)return null;let S=b?"opacity-100":"opacity-0 pointer-events-none";p[3]!==S?(l=(0,f.cn)("fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300",S),p[3]=S,p[4]=l):l=p[4],p[5]!==y?(n=(0,t.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:y}),p[5]=y,p[6]=n):n=p[6];let _=b?"scale-100 translate-y-0":"scale-95 translate-y-4";return p[7]!==v||p[8]!==_?(i=(0,f.cn)("relative w-full max-w-md bg-[#161616] border border-gray-800 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 transform",_,v),p[7]=v,p[8]=_,p[9]=i):i=p[9],p[10]!==w?(o=(0,t.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:w}),p[10]=w,p[11]=o):o=p[11],p[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(E.X,{size:20}),p[12]=c):c=p[12],p[13]!==y?(d=(0,t.jsx)("button",{onClick:y,className:"p-1 px-2 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:c}),p[13]=y,p[14]=d):d=p[14],p[15]!==d||p[16]!==o?(m=(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800/50",children:[o,d]}),p[15]=d,p[16]=o,p[17]=m):m=p[17],p[18]!==j?(h=(0,t.jsx)("div",{className:"p-6",children:j}),p[18]=j,p[19]=h):h=p[19],p[20]!==m||p[21]!==h||p[22]!==i?(u=(0,t.jsxs)("div",{className:i,children:[m,h]}),p[20]=m,p[21]=h,p[22]=i,p[23]=u):u=p[23],p[24]!==u||p[25]!==l||p[26]!==n?(g=(0,t.jsxs)("div",{className:l,children:[n,u]}),p[24]=u,p[25]=l,p[26]=n,p[27]=g):g=p[27],g}e.s(["Modal",()=>B],2957);var A=e.i(23750);e.i(74080);var U=e.i(91918),D=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,U.createSlot)(`Primitive.${s}`),r=x.forwardRef((e,r)=>{let{asChild:l,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(l?a:s,{...n,ref:r})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{}),F=x.forwardRef((e,s)=>(0,t.jsx)(D.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function O(e){let a,r,l,n,i=(0,s.c)(8);return i[0]!==e?({className:a,...r}=e,i[0]=e,i[1]=a,i[2]=r):(a=i[1],r=i[2]),i[3]!==a?(l=(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),i[3]=a,i[4]=l):l=i[4],i[5]!==r||i[6]!==l?(n=(0,t.jsx)(F,{"data-slot":"label",className:l,...r}),i[5]=r,i[6]=l,i[7]=n):n=i[7],n}F.displayName="Label",e.s(["Label",()=>O],10708);let X=(0,N.default)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),R=(0,N.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),W=(0,N.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function G({isOpen:e,onClose:s,type:r,onSuccess:l,onSwitch:n,brandName:i}){let[o,c]=x.useState(!1),[d,h]=x.useState(""),[u,g]=x.useState(""),[p,f]=x.useState(""),[b,y]=x.useState(""),[j,w]=x.useState(""),[N,k]=x.useState(!1),[S,_]=x.useState(""),C=async e=>{if(e.preventDefault(),_(""),"signup"===r&&p!==b)return void _("Passwords do not match");if("signup"===r&&!d.trim())return void _("Username is required");if("signup"===r&&d.length<3)return void _("Username must be at least 3 characters");if("signup"===r&&!N)return void _("You must agree to the Terms of Use");c(!0);try{let e="signup"===r?`254${u}`:u,t="signup"===r?{username:d.trim(),phone:e,password:p,referralCode:j.trim()||void 0}:{phone:u,password:p},a=await fetch("signup"===r?"/api/auth/signup":"/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await a.json();if(!a.ok){_(i.error||"An error occurred"),c(!1);return}let o=i.session?.accessToken;if(o&&"string"==typeof o&&"undefined"!==o&&"null"!==o){localStorage.setItem("accessToken",o),i.session.refreshToken&&localStorage.setItem("refreshToken",i.session.refreshToken);let e=(0,m.createSupabaseBrowserClient)();await e.auth.setSession({access_token:o,refresh_token:i.session.refreshToken}),l({id:i.user.id,username:i.user.username,phone:i.user.phone,email:i.user.email,balance:i.wallet?.balance||0,accessToken:o}),s()}else console.error("Auth success but no valid token received:",i),_("Registration successful, but session could not be established. Please login."),n("login");h(""),g(""),f(""),g(""),f(""),y(""),w(""),k(!1)}catch(e){console.error("Auth error:",e),_("Network error. Please try again.")}finally{c(!1)}};return(0,t.jsx)(B,{isOpen:e,onClose:s,title:"login"===r?`Login to ${i||"JETPESA"}`:`Join ${i||"JETPESA"}`,children:(0,t.jsx)("div",{className:"max-h-[85vh] overflow-y-auto custom-scrollbar px-1",children:(0,t.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"h-24 -mx-1 -mt-4 mb-4 rounded-t-xl overflow-hidden relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-blue-600 opacity-80"}),(0,t.jsx)("img",{src:"/images/promo/welcome-bonus.png",alt:"Welcome",className:"w-full h-full object-cover mix-blend-overlay opacity-50"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("h3",{className:"text-white font-black text-2xl drop-shadow-lg italic uppercase tracking-widest",children:"login"===r?"WELCOME BACK":"JOIN THE ACTION"})})]}),S&&(0,t.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 text-red-500 text-xs font-bold text-center animate-in fade-in zoom-in duration-300",children:S}),"signup"===r&&(0,t.jsxs)("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,t.jsx)(O,{htmlFor:"username",className:"text-gray-400 font-medium font-sans",children:"Username"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(v.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-yellow-500 transition-colors",size:18}),(0,t.jsx)(A.Input,{id:"username",type:"text",placeholder:"Choose a username",value:d,onChange:e=>h(e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),className:"pl-10 h-12 bg-black/60 border-gray-700/50 focus:border-yellow-500/50 focus:ring-yellow-500/20 rounded-xl font-sans transition-all",required:!0,minLength:3,maxLength:20})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500",children:"Letters, numbers, and underscores only"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"phone",className:"text-gray-400 font-medium font-sans",children:"Phone Number"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-gray-400 group-focus-within:text-yellow-500 transition-colors",children:[(0,t.jsx)(X,{size:18}),(0,t.jsx)("span",{className:"font-bold border-r border-gray-700 pr-2",children:"+254"})]}),(0,t.jsx)(A.Input,{id:"phone",type:"tel",placeholder:"7XXXXXXXX",value:u,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.startsWith("0")&&(t=t.substring(1)),g(t.slice(0,9))},className:"pl-[88px] h-12 bg-black/60 border-gray-700/50 focus:border-yellow-500/50 focus:ring-yellow-500/20 rounded-xl font-sans transition-all",required:!0})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500",children:"Enter your Kenyan mobile number (e.g. 712345678)"})]}),"signup"===r?(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"password",title:"Password",className:"text-gray-400 font-medium font-sans text-xs",children:"Password"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-yellow-500 transition-colors",size:16}),(0,t.jsx)(A.Input,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢",value:p,onChange:e=>f(e.target.value),className:"pl-9 h-12 bg-black/60 border-gray-700/50 focus:border-yellow-500/50 focus:ring-yellow-500/20 rounded-xl font-sans text-sm transition-all",required:!0,minLength:6})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"confirm-password",title:"Confirm",className:"text-gray-400 font-medium font-sans text-xs",children:"Confirm"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-yellow-500 transition-colors",size:16}),(0,t.jsx)(A.Input,{id:"confirm-password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢",value:b,onChange:e=>y(e.target.value),className:"pl-9 h-12 bg-black/60 border-gray-700/50 focus:border-yellow-500/50 focus:ring-yellow-500/20 rounded-xl font-sans text-sm transition-all",required:!0})]})]})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"password",title:"Password",className:"text-gray-400 font-medium font-sans",children:"Password"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-yellow-500 transition-colors",size:18}),(0,t.jsx)(A.Input,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:p,onChange:e=>f(e.target.value),className:"pl-10 h-12 bg-black/60 border-gray-700/50 focus:border-yellow-500/50 focus:ring-yellow-500/20 rounded-xl font-sans transition-all",required:!0,minLength:6})]})]}),"signup"===r&&(0,t.jsxs)("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,t.jsx)(O,{htmlFor:"referral-code",className:"text-gray-400 font-medium font-sans",children:"Referral Code (Optional)"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(v.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-yellow-500 transition-colors",size:18}),(0,t.jsx)(A.Input,{id:"referral-code",type:"text",placeholder:"Enter referral code",value:j,onChange:e=>w(e.target.value),className:"pl-10 h-12 bg-black/60 border-gray-700/50 focus:border-yellow-500/50 focus:ring-yellow-500/20 rounded-xl font-sans transition-all"})]})]})]}),"signup"===r&&(0,t.jsxs)("div",{className:"flex items-start gap-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,t.jsx)("input",{type:"checkbox",id:"terms-agree",checked:N,onChange:e=>k(e.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-600 bg-black/40 text-red-500 focus:ring-red-500/20 focus:ring-offset-0 cursor-pointer"}),(0,t.jsxs)("label",{htmlFor:"terms-agree",className:"text-sm text-gray-400 cursor-pointer",children:["I agree to the"," ",(0,t.jsx)("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-red-500 font-bold hover:underline underline-offset-4",children:"Terms of Use"})]})]}),(0,t.jsx)(a.Button,{type:"submit",className:"w-full h-12 bg-red-600 hover:bg-red-700 text-white font-bold text-lg rounded-xl shadow-lg shadow-red-600/20 group relative overflow-hidden",disabled:o,children:o?(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin mx-auto"}):(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("span",{children:"login"===r?"Login":"Sign Up"}),(0,t.jsx)(W,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})}),(0,t.jsx)("div",{className:"text-center pt-2",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["login"===r?"Don't have an account?":"Already have an account?"," ",(0,t.jsx)("button",{type:"button",onClick:()=>n("login"===r?"signup":"login"),className:"text-red-500 font-bold hover:underline underline-offset-4",children:"login"===r?"Sign Up":"Login"})]})})]})})})}e.s(["AuthDialogs",()=>G],40786);var K=e.i(31278);let $=(0,N.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>$],95468);let q=(0,N.default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),H=(0,N.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var V=e.i(46696);function J({isOpen:e,onClose:s,onSuccess:r,currentBalance:l,defaultPhone:n,userEmail:i}){let[o,c]=x.useState(""),[d,m]=x.useState(n),[h,u]=x.useState("idle"),[g,p]=x.useState(""),[f,b]=x.useState(""),[y,j]=x.useState(null),w=x.useRef(!1),v=x.useMemo(()=>{let e=i||"";return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||["254712345678"].some(t=>e.startsWith(t))},[i])?1:100;x.useEffect(()=>{n&&m(n)},[n]),x.useEffect(()=>{"idle"===h&&(w.current=!1)},[h]),x.useEffect(()=>{let e,t=0;return"sent"===h&&y&&(e=setInterval(async()=>{if(w.current)return void clearInterval(e);if(++t>40){clearInterval(e),u("failed"),p("Payment confirmation timed out. If money was deducted, your wallet will be updated shortly.");return}try{let t=localStorage.getItem("accessToken"),s=await fetch(`/api/mpesa/status?cid=${y}`,{headers:t?{Authorization:`Bearer ${t}`}:{}});if(s.ok){let t=await s.json();if("completed"===t.status){if(w.current)return;w.current=!0,clearInterval(e),u("confirmed"),V.toast.success("Payment received! Wallet updated."),"function"==typeof r&&r(l+(parseFloat(o)||0))}else"failed"===t.status&&(u("failed"),p(t.result_desc||"Payment failed or cancelled"),clearInterval(e))}}catch(e){console.error("Polling error",e)}},3e3)),()=>clearInterval(e)},[h,y]);let N=async()=>{let e=parseFloat(o);if(isNaN(e)||e<v)return void p(`Please enter a valid amount (minimum ${v} KES)`);if(e>15e4)return void p("Maximum deposit is 150,000 KES");if(!d||d.length<9)return void p("Please enter a valid phone number");p(""),u("processing");try{let t=localStorage.getItem("accessToken"),s=d.replace(/\D/g,"");s.startsWith("0")&&(s="254"+s.substring(1)),s.startsWith("254")||(s="254"+s);let a=await fetch("/api/mpesa/stkpush",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({amount:e,phone:s})}),r=await a.json();if(!a.ok){p(r.error||"Failed to initiate payment"),u("failed");return}j(r.checkoutRequestId),u("sent"),V.toast.success("STK Push sent! Please check your phone.")}catch(e){console.error("Deposit error:",e),p("Network error. Please try again."),u("failed")}},k=()=>{"processing"!==h&&(c(""),u("idle"),p(""),j(null),s())};return(0,t.jsx)(B,{isOpen:e,onClose:k,title:"Deposit via M-Pesa",children:(0,t.jsx)("div",{className:"space-y-6",children:"confirmed"===h?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-6 flex flex-col items-center gap-4 animate-in fade-in duration-300 shadow-[0_0_30px_rgba(34,197,94,0.15)]",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center animate-bounce-subtle",children:(0,t.jsx)($,{className:"w-8 h-8 text-green-500"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-green-400 font-black text-xl tracking-wide uppercase mb-1",children:"Payment Successful!"}),(0,t.jsx)("p",{className:"text-green-500/70 text-sm font-bold",children:"Your wallet has been credited."})]})]}),(0,t.jsx)(a.Button,{onClick:k,className:"w-full h-14 bg-green-600 hover:bg-green-500 text-white font-black text-lg uppercase tracking-wider rounded-2xl shadow-[0_10px_30px_-10px_rgba(34,197,94,0.3)] transition-all hover:scale-[1.02]",children:"Close"})]}):"failed"===h?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 flex flex-col items-center gap-4 animate-in fade-in duration-300 shadow-[0_0_30px_rgba(239,68,68,0.15)]",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center",children:(0,t.jsx)(H,{className:"w-8 h-8 text-red-500"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-400 font-black text-xl tracking-wide uppercase mb-1",children:"Payment Failed"}),(0,t.jsx)("p",{className:"text-red-500/70 text-sm font-bold",children:g||"Transaction was cancelled or failed."})]})]}),(0,t.jsx)(a.Button,{onClick:()=>{u("idle"),p("")},className:"w-full h-14 bg-red-600 hover:bg-red-500 text-white font-black text-lg uppercase tracking-wider rounded-2xl shadow-[0_10px_30px_-10px_rgba(239,68,68,0.3)] transition-all hover:scale-[1.02]",children:"Try Again"})]}):(0,t.jsxs)(t.Fragment,{children:["sent"===h&&(0,t.jsxs)("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-xl p-4 flex items-center gap-3 animate-pulse shadow-[0_0_20px_rgba(249,115,22,0.1)]",children:[(0,t.jsx)(K.Loader2,{className:"w-6 h-6 text-orange-500 animate-spin"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-orange-400 font-bold text-sm tracking-wide uppercase",children:"Waiting for Payment..."}),(0,t.jsx)("p",{className:"text-orange-500/70 text-xs font-semibold",children:f||"Please enter your M-Pesa PIN on your phone."})]})]}),g&&(0,t.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 text-red-500 text-xs font-bold text-center animate-in fade-in zoom-in duration-300 shadow-[0_0_20px_rgba(239,68,68,0.1)]",children:g}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"phone",className:"text-gray-400 font-bold text-xs uppercase tracking-wider",children:"M-Pesa Number"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(X,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-green-500 transition-colors",size:20}),(0,t.jsx)(A.Input,{id:"phone",type:"tel",placeholder:"2547XXXXXXXX",value:d,onChange:e=>m(e.target.value),className:"pl-12 h-14 bg-black/40 border-white/10 focus:border-green-500/50 focus:ring-green-500/20 rounded-2xl font-bold font-mono text-lg tracking-wider text-white placeholder:text-gray-700 transition-all",disabled:"processing"===h||"sent"===h})]}),(0,t.jsxs)("p",{className:"text-[10px] text-gray-500 flex items-center gap-1.5 pl-1",children:[(0,t.jsx)(H,{size:12,className:"text-green-500"}),"Securely linked to your account via Account Number"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"amount",className:"text-gray-400 font-bold text-xs uppercase tracking-wider",children:"Amount (KES)"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(q,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-green-500 transition-colors",size:20}),(0,t.jsx)(A.Input,{id:"amount",type:"number",placeholder:"Enter amount",value:o,onChange:e=>c(e.target.value),className:"pl-12 h-14 bg-black/40 border-white/10 focus:border-green-500/50 focus:ring-green-500/20 rounded-2xl font-bold text-lg text-white placeholder:text-gray-700 transition-all",disabled:"processing"===h||"sent"===h,min:1,max:15e4})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[100,500,1e3,5e3].map(e=>(0,t.jsx)(a.Button,{variant:"secondary",size:"sm",className:"bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white text-xs h-10 rounded-xl border border-white/5 hover:border-white/20 font-bold transition-all active:scale-95",onClick:()=>c(String(e)),disabled:"processing"===h||"sent"===h,children:e.toLocaleString()},e))}),(0,t.jsxs)("div",{className:"flex items-center justify-between bg-black/30 rounded-xl p-4 border border-white/5",children:[(0,t.jsx)("span",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider",children:"Current Balance"}),(0,t.jsxs)("span",{className:"text-orange-500 font-black text-lg drop-shadow-[0_0_10px_rgba(249,115,22,0.3)]",children:["KES ",l.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),(0,t.jsx)(a.Button,{onClick:N,disabled:"processing"===h||"sent"===h||!o||!d,className:"w-full h-14 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-black text-lg uppercase tracking-wider rounded-2xl shadow-[0_10px_30px_-10px_rgba(34,197,94,0.3)] disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-[1.02]",children:"processing"===h?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(K.Loader2,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):"sent"===h?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(K.Loader2,{className:"w-5 h-5 animate-spin"}),"Check Phone..."]}):"DEPOSIT NOW"})]})})})}e.s(["DepositModal",()=>J],81943);var Y=e.i(74886),Q=e.i(43531);function Z({isOpen:e,onClose:s,user:l,balance:n,onLogout:i,onLogin:o,onWithdraw:c}){let[d,m]=(0,x.useState)(""),[h,u]=(0,x.useState)(!1),[p,b]=(0,x.useState)("..."),[y,j]=(0,x.useState)(!1);(0,x.useEffect)(()=>{e&&l&&w()},[e,l]);let w=async()=>{j(!0);try{let e=localStorage.getItem("accessToken"),t=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();if(e.profile?.referral_code){b(e.profile.referral_code);let t=window.location.origin;m(`${t}?ref=${e.profile.referral_code}`)}}}catch(e){console.error(e)}finally{j(!1)}},N=()=>{navigator.clipboard.writeText(d),u(!0),setTimeout(()=>u(!1),2e3)},k=async()=>{if(navigator.share)try{await navigator.share({title:"Join JETPESA!",text:"Join me on JETPESA and earn KES 500 bonus!",url:d})}catch(e){console.log("Error sharing",e)}else N()};return l?(0,t.jsx)(B,{isOpen:e,onClose:s,title:"My Profile",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-black/40 rounded-xl p-4 border border-gray-800 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shrink-0",children:(0,t.jsx)(v.User,{className:"text-white w-6 h-6"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-white text-lg truncate",children:l?.username||"User"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm truncate",children:l?.phone||"07XXXXXXXX"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"bg-[#1a1a1a] p-3 rounded-xl border border-gray-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(r.Wallet,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Balance"})]}),(0,t.jsx)("p",{className:"text-lg font-black text-white",children:(0,f.formatCurrency)(n)})]}),(0,t.jsxs)("div",{className:"bg-[#1a1a1a] p-3 rounded-xl border border-gray-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(g.Gift,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Bonus"})]}),(0,t.jsx)("p",{className:"text-lg font-black text-green-500",children:"KES 0.00"})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-black rounded-xl p-4 border border-gray-800 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:(0,t.jsx)(T.Share2,{className:"w-24 h-24"})}),(0,t.jsx)("h4",{className:"font-bold text-white mb-1 relative z-10",children:"Refer & Earn KES 500"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mb-4 relative z-10 max-w-[80%]",children:"Share your unique link. You get KES 500 automatically when your friend makes their first deposit!"}),(0,t.jsxs)("div",{className:"space-y-2 relative z-10",children:[(0,t.jsx)(O,{className:"text-xs text-gray-500",children:"Your Referral Link"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(A.Input,{readOnly:!0,value:d,className:"bg-black/50 border-gray-700 font-mono text-xs h-10"}),(0,t.jsx)(a.Button,{onClick:N,size:"icon",variant:"secondary",className:"shrink-0 h-10 w-10 bg-gray-800 hover:bg-gray-700 border-gray-700",children:h?(0,t.jsx)(Q.Check,{className:"w-4 h-4 text-green-500"}):(0,t.jsx)(Y.Copy,{className:"w-4 h-4"})}),(0,t.jsx)(a.Button,{onClick:k,size:"icon",className:"shrink-0 h-10 w-10 bg-orange-600 hover:bg-orange-700 text-white",children:(0,t.jsx)(T.Share2,{className:"w-4 h-4"})})]})]})]}),(0,t.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,t.jsxs)(a.Button,{className:"w-full bg-orange-500/10 hover:bg-orange-500/20 text-orange-500 border border-orange-500/20",onClick:()=>{c?.()},children:[(0,t.jsx)(r.Wallet,{className:"w-4 h-4 mr-2"}),"Withdraw Funds"]}),(0,t.jsx)(a.Button,{variant:"secondary",className:"w-full bg-gray-800 hover:bg-gray-700 text-white",onClick:()=>{s(),window.location.href="/profile"},children:"View Full Profile"}),(0,t.jsxs)(a.Button,{variant:"destructive",className:"w-full bg-red-900/20 hover:bg-red-900/40 text-red-500 border border-red-900/50",onClick:()=>{s(),i()},children:[(0,t.jsx)(C.LogOut,{className:"w-4 h-4 mr-2"}),"Log Out"]})]})]})}):(0,t.jsx)(B,{isOpen:e,onClose:s,title:"Authentication Required",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 space-y-4 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-800 flex items-center justify-center",children:(0,t.jsx)(v.User,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:"Guest User"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1 max-w-[250px]",children:"Please login to access your profile, wallet, and referral link."})]}),(0,t.jsx)(a.Button,{onClick:()=>{s(),o()},className:"bg-red-600 hover:bg-red-700 text-white font-bold w-full max-w-xs",children:"Login to Continue"})]})})}e.s(["ProfileModal",()=>Z],48302)},80748,e=>{"use strict";var t=e.i(43476),s=e.i(932),a=e.i(84614),r=e.i(7233),l=e.i(67881),n=e.i(22016);function i(e){let i,o,c,d,x,m,h,u,g,p,f,b,y,j,w,v,N,k,S,_,C,z=(0,s.c)(59),{isLoggedIn:T,isCheckingAuth:P,balance:I,siteName:L,onLogin:M,onRegister:E,onDeposit:B,onProfile:A}=e;if(z[0]!==L){let e,s,a,r,l,j,w,v=L.toUpperCase();x="h-14 lg:h-16 shrink-0 bg-[#050508]/95 backdrop-blur-md border-b border-white/[0.05] flex items-center px-4 lg:px-6 justify-between z-30 sticky top-0",i=n.default,y="/",c="flex items-center gap-2.5 group relative",z[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("div",{className:"absolute -inset-2 bg-gradient-to-r from-yellow-500/0 via-amber-500/10 to-yellow-500/0 blur-xl rounded-2xl group-hover:via-amber-500/20 transition-all duration-700"}),z[14]=d):d=z[14],f="relative flex items-center gap-2",z[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-br from-yellow-500/20 to-amber-600/10 blur-sm group-hover:from-yellow-500/30 group-hover:to-amber-600/20 transition-all duration-500"}),z[15]=e):e=z[15],z[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("path",{d:"M2 17L5 7L9 12L12 4L15 12L19 7L22 17H2Z",fill:"url(#crownGold)",stroke:"url(#crownGold)",strokeWidth:"0.5"}),a=(0,t.jsx)("rect",{x:"2",y:"17",width:"20",height:"3",rx:"1",fill:"url(#crownGold)"}),r=(0,t.jsx)("circle",{cx:"7",cy:"13",r:"1",fill:"#ef4444"}),l=(0,t.jsx)("circle",{cx:"12",cy:"9",r:"1.2",fill:"#3b82f6"}),j=(0,t.jsx)("circle",{cx:"17",cy:"13",r:"1",fill:"#22c55e"}),z[16]=s,z[17]=a,z[18]=r,z[19]=l,z[20]=j):(s=z[16],a=z[17],r=z[18],l=z[19],j=z[20]),z[21]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsxs)("div",{className:"relative w-9 h-9 lg:w-10 lg:h-10 flex items-center justify-center",children:[e,(0,t.jsx)("div",{className:"relative w-full h-full bg-gradient-to-br from-yellow-500/15 to-amber-900/20 border border-yellow-500/25 rounded-lg flex items-center justify-center group-hover:border-yellow-400/40 group-hover:scale-105 transition-all duration-300 shadow-[0_0_12px_rgba(234,179,8,0.1)]",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-5 h-5 lg:w-6 lg:h-6 drop-shadow-[0_0_4px_rgba(234,179,8,0.4)]",children:[s,a,r,l,j,(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"crownGold",x1:"2",y1:"4",x2:"22",y2:"20",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#fbbf24"}),(0,t.jsx)("stop",{offset:"50%",stopColor:"#f59e0b"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#d97706"})]})})]})})]}),z[21]=b):b=z[21],p="flex flex-col items-start leading-none",u="flex items-baseline gap-0",z[22]===Symbol.for("react.memo_cache_sentinel")?(w={fontFamily:"var(--font-poppins)",lineHeight:"1"},z[22]=w):w=z[22],g=(0,t.jsx)("span",{className:"text-2xl lg:text-3xl font-black bg-gradient-to-b from-yellow-300 via-amber-400 to-yellow-600 bg-clip-text text-transparent drop-shadow-lg",style:w,children:v.charAt(0)}),o="text-lg lg:text-xl font-extrabold bg-gradient-to-b from-yellow-200 via-amber-300 to-yellow-500 bg-clip-text text-transparent tracking-wider",z[23]===Symbol.for("react.memo_cache_sentinel")?(m={fontFamily:"var(--font-poppins)",lineHeight:"1"},z[23]=m):m=z[23],h=v.slice(1),z[0]=L,z[1]=i,z[2]=o,z[3]=c,z[4]=d,z[5]=x,z[6]=m,z[7]=h,z[8]=u,z[9]=g,z[10]=p,z[11]=f,z[12]=b,z[13]=y}else i=z[1],o=z[2],c=z[3],d=z[4],x=z[5],m=z[6],h=z[7],u=z[8],g=z[9],p=z[10],f=z[11],b=z[12],y=z[13];return z[24]!==o||z[25]!==m||z[26]!==h?(j=(0,t.jsx)("span",{className:o,style:m,children:h}),z[24]=o,z[25]=m,z[26]=h,z[27]=j):j=z[27],z[28]!==j||z[29]!==u||z[30]!==g?(w=(0,t.jsxs)("div",{className:u,children:[g,j]}),z[28]=j,z[29]=u,z[30]=g,z[31]=w):w=z[31],z[32]!==w||z[33]!==p?(v=(0,t.jsx)("div",{className:p,children:w}),z[32]=w,z[33]=p,z[34]=v):v=z[34],z[35]!==v||z[36]!==f||z[37]!==b?(N=(0,t.jsxs)("div",{className:f,children:[b,v]}),z[35]=v,z[36]=f,z[37]=b,z[38]=N):N=z[38],z[39]!==i||z[40]!==c||z[41]!==d||z[42]!==N||z[43]!==y?(k=(0,t.jsxs)(i,{href:y,className:c,children:[d,N]}),z[39]=i,z[40]=c,z[41]=d,z[42]=N,z[43]=y,z[44]=k):k=z[44],z[45]!==I||z[46]!==P||z[47]!==T||z[48]!==B||z[49]!==M||z[50]!==A||z[51]!==E?(S=!P&&(0,t.jsx)(t.Fragment,{children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Button,{size:"sm",className:"bg-green-500 hover:bg-green-400 text-black h-9 lg:h-10 px-3 lg:px-4 text-xs lg:text-sm font-bold rounded-xl shadow-[0_0_20px_rgba(34,197,94,0.2)] mr-1 lg:mr-2 transition-all hover:scale-105 active:scale-95",onClick:B,children:[(0,t.jsx)(r.Plus,{size:16,className:"mr-1"})," DEPOSIT"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 pl-2 lg:pl-4 border-l border-white/10",children:[(0,t.jsxs)("div",{className:"flex flex-col items-end leading-none",children:[(0,t.jsx)("span",{className:"text-[9px] lg:text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:"Balance"}),(0,t.jsxs)("span",{className:"text-orange-400 font-black text-sm lg:text-lg tracking-wide drop-shadow-md",children:["KES ",I.toLocaleString()]})]}),(0,t.jsx)("button",{onClick:A,className:"w-9 h-9 lg:w-10 lg:h-10 rounded-lg lg:rounded-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/10 flex items-center justify-center transition-all hover:scale-105 group hover:border-orange-500/50",children:(0,t.jsx)(a.User,{size:16,className:"text-gray-400 group-hover:text-white lg:w-[18px] lg:h-[18px]"})})]})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,t.jsx)(l.Button,{variant:"ghost",className:"text-gray-300 hover:text-white flex hover:bg-white/5",onClick:M,children:"LOGIN"}),(0,t.jsx)(l.Button,{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold h-9 lg:h-10 px-4 lg:px-6 rounded-xl text-xs lg:text-sm shadow-lg shadow-orange-500/20 transition-all hover:scale-105 active:scale-95 hidden lg:flex",onClick:E,children:"REGISTER"})]})}),z[45]=I,z[46]=P,z[47]=T,z[48]=B,z[49]=M,z[50]=A,z[51]=E,z[52]=S):S=z[52],z[53]!==S?(_=(0,t.jsx)("div",{className:"flex items-center gap-2 lg:gap-3 animate-fade-slide-up",children:S}),z[53]=S,z[54]=_):_=z[54],z[55]!==x||z[56]!==k||z[57]!==_?(C=(0,t.jsxs)("header",{className:x,children:[k,_]}),z[55]=x,z[56]=k,z[57]=_,z[58]=C):C=z[58],C}e.s(["GameHeader",()=>i])},24136,e=>{"use strict";var t=e.i(71645),s=e.i(15940),a=e.i(46696);function r(){let[e,r]=(0,t.useState)(!0),[l,n]=(0,t.useState)(!1),[i,o]=(0,t.useState)(null),[c,d]=(0,t.useState)(0),x=(0,t.useRef)(0),m=(0,t.useRef)(null);(0,t.useEffect)(()=>{x.current=c},[c]);let h=(0,t.useCallback)(e=>{d(e)},[]),u=(0,t.useCallback)(async e=>{try{let t=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(t.ok){let s=await t.json();return d(s.wallet.balance),o({id:s.user.id,username:s.user.username,phone:s.user.phone,email:s.user.email,balance:s.wallet.balance,accessToken:e,referralCode:s.profile?.referral_code||void 0}),n(!0),localStorage.setItem("accessToken",e),!0}return!1}catch(e){return console.error("[useAuth] fetchUserData error:",e),!1}},[]),g=(0,t.useCallback)(e=>{let t=(0,s.createSupabaseBrowserClient)();m.current&&t.removeChannel(m.current),m.current=t.channel(`wallet-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"wallets",filter:`user_id=eq.${e}`},e=>{let t=e.new.balance;t>x.current&&a.toast.success(`Balance updated: KES ${t.toLocaleString()}`),h(t)}).subscribe()},[h]);(0,t.useEffect)(()=>{let e=(0,s.createSupabaseBrowserClient)(),t=async e=>{e?.access_token?(localStorage.setItem("accessToken",e.access_token),e.refresh_token&&localStorage.setItem("refreshToken",e.refresh_token),await u(e.access_token)&&e.user?.id&&g(e.user.id)):p()},{data:{subscription:a}}=e.auth.onAuthStateChange(async(e,s)=>{console.log("[useAuth] onAuthStateChange:",e),"INITIAL_SESSION"===e?(await t(s),r(!1)):"SIGNED_IN"===e||"TOKEN_REFRESHED"===e?await t(s):"SIGNED_OUT"===e&&p()});return()=>{a.unsubscribe(),m.current&&e.removeChannel(m.current)}},[u,g]);let p=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),n(!1),o(null),d(0)},f=(0,t.useCallback)(()=>{(0,s.createSupabaseBrowserClient)().auth.signOut(),p()},[]),b=(0,t.useCallback)(e=>{o(e),d(e.balance),n(!0),e.accessToken&&localStorage.setItem("accessToken",e.accessToken),g(e.id)},[g]);return{isLoggedIn:l,isCheckingAuth:e,user:i,balance:c,setBalance:d,handleAuthSuccess:b,handleLogout:f,handleBalanceUpdate:h,getToken:(0,t.useCallback)(async()=>{let e=(0,s.createSupabaseBrowserClient)(),{data:{session:t}}=await e.auth.getSession();return t?.access_token?(localStorage.setItem("accessToken",t.access_token),t.access_token):localStorage.getItem("accessToken")},[])}}e.s(["useAuth",()=>r])}]);